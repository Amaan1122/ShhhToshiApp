<app-header></app-header>

<div class="flex flex-col items-center min-h-screen bg-gray-50 py-8 pt-20">
  <!-- Portfolio Overview Card -->
  <div
    class="bg-white rounded-2xl shadow border border-gray-200 p-8 mb-8 w-full max-w-md"
  >
    <div class="flex items-center gap-2 mb-4">
      <span class="text-xl">ðŸª™</span>
      <span class="font-semibold text-lg">Portfolio Overview</span>
    </div>
    <div class="flex justify-between mb-2">
      <div class="">
        <div class="text-md text-gray-500">Available Balance</div>
        <div class="text-lg font-bold">
          {{ walletBalance | number : "1.2-2" }} TON
        </div>
      </div>
      <div class="">
        <div class="text-md text-gray-500">Staked Balance</div>
        <div class="text-lg font-bold">
          {{ stakedAmount | number : "1.2-2" }} TON
        </div>
      </div>
    </div>
    <div
      class="flex items-center justify-between bg-gray-100 rounded-lg px-4 py-3 mt-4"
    >
      <div class="flex items-center gap-2">
        <span class="text-sm">ðŸ“ˆ</span>
        <span class="text-gray-500 text-sm">Available Rewards</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="font-semibold text-lg"
          >{{ walletPoints | number : "1.2-2" }} Points</span
        >
        <button
          class="bg-black text-white font-semibold rounded-lg px-4 py-1 text-sm"
          [disabled]="walletPoints <= 0"
          (click)="claimRewards()"
        >
          Claim
        </button>
      </div>
    </div>
  </div>

  <!-- Staking/Unstaking Card -->
  <div
    class="bg-white rounded-2xl shadow border border-gray-200 p-8 w-full max-w-md"
  >
    <div class="flex items-center gap-2 mb-4">
      <span class="font-semibold text-lg">Staking</span>
    </div>
    <div class="text-gray-500 mb-4">
      Earn up to 12% APY on your staked TON tokens
    </div>
    <div class="flex mb-6 rounded-lg overflow-hidden border border-gray-200">
      <button
        (click)="model.setActiveTab('stake')"
        [ngClass]="{
          'bg-gray-100': model.isStakeTabActive(),
          'bg-white': !model.isStakeTabActive()
        }"
        class="flex-1 py-2 font-semibold text-gray-700"
      >
        Stake
      </button>
      <button
        (click)="model.setActiveTab('unstake')"
        [ngClass]="{
          'bg-gray-100': !model.isStakeTabActive(),
          'bg-white': model.isStakeTabActive()
        }"
        class="flex-1 py-2 font-semibold text-gray-700"
      >
        Unstake
      </button>
    </div>

    <!-- Stake View -->
    <div *ngIf="model.isStakeTabActive()">
      <div class="mb-2 text-sm font-medium">Amount to Stake</div>
      <div class="flex items-center mb-4">
        <input
          type="number"
          min="0"
          [max]="walletBalance"
          [(ngModel)]="model.amount"
          placeholder="0.00"
          class="flex-1 px-3 py-2 border rounded-lg text-lg mr-2"
        />
        <button
          (click)="model.setAmount(walletBalance)"
          class="text-xs font-semibold text-gray-500"
        >
          MAX
        </button>
      </div>
      <div class="text-xs text-gray-500 mb-6">
        Available: {{ walletBalance | number : "1.2-2" }} TON
      </div>
      <button
        class="w-full bg-gray-700 text-white font-semibold rounded-lg px-8 py-3 hover:bg-gray-900 transition"
        [disabled]="model.amount() <= 0 || model.amount() > walletBalance"
        (click)="stakeNow()"
      >
        Stake TON
      </button>
    </div>

    <!-- Unstake View -->
    <div *ngIf="!model.isStakeTabActive()">
      <div class="mb-2 text-sm font-medium">Amount to Unstake</div>
      <div class="flex items-center mb-4">
        <input
          type="number"
          min="0"
          [max]="stakedAmount"
          [(ngModel)]="model.amount"
          placeholder="0.00"
          class="flex-1 px-3 py-2 border rounded-lg text-lg mr-2"
        />
        <button
          (click)="model.setAmount(stakedAmount)"
          class="text-xs font-semibold text-gray-500"
        >
          MAX
        </button>
      </div>
      <div class="text-xs text-gray-500 mb-2">
        Staked: {{ stakedAmount | number : "1.2-2" }} TON
      </div>
      <button
        class="w-full bg-gray-700 text-white font-semibold rounded-lg px-8 py-3 hover:bg-gray-900 transition"
        [disabled]="model.amount() <= 0 || model.amount() > stakedAmount"
        (click)="unstakeNow()"
      >
        Unstake TON
      </button>
    </div>
  </div>
</div>

<app-footer></app-footer>
