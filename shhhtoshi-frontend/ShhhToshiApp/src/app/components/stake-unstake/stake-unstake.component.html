<app-header></app-header>

<div
  class="mx-auto min-h-screen w-full dark:text-dark-50 bg-gradient-to-r from-yellow-500 to-blue-600 overflow-scroll pt-16"
>
  <p class="pt-4 text-center text-3xl font-bold text-slate-100">ShhhToshi</p>

  <p class="my-4 text-center text-slate-100">
    {{
      model.isStakeTabActive()
        ? "Stake TON & Receive SHToken While Staking"
        : "Unstake SHToken & Receive TON & Rewards"
    }}
  </p>

  <div
    class="mx-auto my-8 w-max rounded-full bg-gradient-to-r from-yellow-400 to-blue-600"
  >
    <ul
      class="flex flex-nowrap text-slate-100"
      [ngClass]="{
        stake: model.isStakeTabActive(),
        unstake: !model.isStakeTabActive()
      }"
    >
      <li
        class="m-1 w-36 cursor-pointer rounded-full py-1 text-center"
        (click)="model.setActiveTab('stake')"
        (keypress)="model.setActiveTab('stake')"
      >
        Stake
      </li>
      <li
        class="m-1 w-36 cursor-pointer rounded-full py-1 text-center"
        (click)="model.setActiveTab('unstake')"
        (keypress)="model.setActiveTab('unstake')"
      >
        Unstake
      </li>
    </ul>
  </div>

  <div class="mx-auto mb-12 max-w-lg">
    <div
      *ngIf="model.isWalletConnected"
      class="overflow-hidden transition-all duration-700 motion-reduce:transition-none"
    >
      <div
        class="mx-4 rounded-t-2xl bg-b px-8 pb-12 pt-4 text-sm text-slate-100 bg-gray-700"
      >
        <div class="flex flex-row flex-wrap">
          <p class="font-light">TON Balance</p>
          <p class="ml-auto font-medium">{{ model.tonBalanceFormatted() }}</p>
        </div>

        <div class="my-4 h-px bg-white opacity-40"></div>

        <div class="flex flex-row flex-wrap">
          <p class="font-light">SHToken Balance</p>
          <p class="ml-auto font-medium">
            {{ model.shTokenBalanceFormatted() }}
          </p>
        </div>
      </div>
    </div>

    <div class="mx-4 -mt-8 rounded-2xl bg-gray-200 p-8 shadow-md">
      <p class="font-semibold">
        {{ model.isStakeTabActive() ? "Stake" : "Unstake" }}
      </p>

      <label>
        <div
          class="mb-8 mt-4 flex rounded-lg border px-4 py-2 focus-within:border-brown bg-gray-700"
          [ngClass]="
            !model.isAmountValid()
              ? 'border-orange focus-within:border-orange'
              : 'border-milky'
          "
        >
          <img
            src="../../../assets/ton.svg"
            alt="Ton"
            class="w-7"
            [class.hidden]="!model.isStakeTabActive()"
          />
          <img
            src="../../../assets/favicon/shhhtoshi.png"
            alt="ShToken"
            class="w-7"
            [class.hidden]="model.isStakeTabActive()"
          />

          <input
            type="number"
            placeholder="Amount"
            class="w-full mx-3 px-3 text-sm md:text-lg bg-transparent text-slate-100 border rounded-lg"
            [value]="model.amount()"
            (input)="onAmountInput($event)"
            (keydown)="onInputKeyDown($event)"
          />

          <button
            class="rounded-lg px-3 text-xs bg-gray-200 text-gray-700 font-semibold"
            [class.bg-orange]="!model.isAmountValid()"
            (click)="model.setAmountToMax()"
          >
            Max
          </button>
        </div>
      </label>

      <div class="flex justify-center ">
        <button
          id="submit"
          class="bg-gray-700 py-1 px-3 rounded-lg text-sm font-medium text-slate-100"
          [disabled]="!model.isButtonEnabled()"
          (click)="submit()"
        >
          {{ model.buttonLabel() }}
        </button>
      </div>

      <div class="text-sm font-medium bg-gray-700 rounded-md mt-2 py-2 px-4 text-slate-100 ">
        <div class="my-1 flex flex-row flex-wrap">
          <p>You will receive</p>
          <p class="ml-auto">{{ model.youWillReceive() }}</p>
        </div>
        <div class="my-1 flex flex-row flex-wrap">
          <p>Exchange rate</p>
          <p class="ml-auto">
            {{ model.exchangeRateFormatted() }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<app-footer></app-footer>
